<!DOCTYPE html>
<html>
  <head>
    <script src="jquery.js"></script>
    <script src="jquery.timeago.js"></script>
    <script src="data_generator.js"></script>
    <link rel="stylesheet" href="twittler_styles.css">
    <link href='http://fonts.googleapis.com/css?family=Cabin:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
  </head>
  <body>
    <section class="tweetFeed"></section>
    <section class="timestamp"></section>
    <script>

      $(document).ready(function(){
        var $tweetFeed = $('.tweetFeed');
        var $timestamp = $('.timestamp');

        var index = streams.home.length - 1;
        while(index >= 0){
          var tweet = streams.home[index];
          var $tweet = $('<div></div>');
          var $time = $('<div class></div>');
          $tweet.text('@' + tweet.user + ': ' + tweet.message);
          window.setInterval(function(){$time.text($.timeago(tweet.created_at))}, 1000);
          $tweet.appendTo($tweetFeed);
          $time.appendTo($timestamp);
          index -= 1;
        }
        $(document).on("tweetAdded", function(){
          var tweet = streams.home[streams.home.length - 1];
          var $tweet = $('<div class="load"></div>');
          var $time = $('<div class="load"></div>');
          $tweet.text('@' + tweet.user + ': ' + tweet.message);
          window.setInterval(function(){$time.text($.timeago(tweet.created_at))}, 1000);
          $tweet.prependTo($tweetFeed).animate({'opacity': '1'}, 800);
          $time.prependTo($timestamp).animate({'opacity': '1'}, 800);
        });

      });

    </script>
  </body>
</html>
